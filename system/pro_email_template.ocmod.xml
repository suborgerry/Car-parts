<?xml version="1.0" encoding="UTF-8"?>
<modification>
	<id>Pro Email Template</id>
	<name>Pro Email Template</name>
	<code>pro_email</code>
	<version>1.9.9</version>
	
	<author><![CDATA[<b style="color:#83a411">Geeko<b style="color:#5f5f5f">Dev</b></b>]]></author>
  <link>https://geekodev.com</link>
	
  <file path="catalog/controller/mail/order.php" v="3" error="skip">
    <operation>
			<search index="0"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="0"><![CDATA[
				/*
				$mail->send();
        */
        
				$this->load->model('tool/pro_email');

        if (!empty($data['payment_instruction']) && strpos($order_info['payment_code'],'xpayment.') !== false) {
          $comment = $data['payment_instruction'];
        }
        
        $email_params = array(
          'type' => 'order.confirm',
          'mail' => $mail,
          'order_info' => $order_info,
          'order_status_id' => $order_status_id,
          'order_comment' => nl2br($comment),
        );
        
        $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
    <operation>
			<search index="2"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="2"><![CDATA[
				/*
				$mail->send();
        */
        
				$this->load->model('tool/pro_email');

        $email_params = array(
          'type' => 'admin.order.confirm',
          'mail' => &$mail,
          'reply_to' => $order_info['email'],
          'order_info' => $order_info,
          'order_status_id' => $order_status_id,
          'order_comment' => nl2br($comment),
        );
        
        $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
		<operation>
			<search index="1"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="1"><![CDATA[
						/*
				$mail->send();
        */
        
            $this->load->model('tool/pro_email');

            $email_params = array(
              'type' => 'order.update',
              'mail' => $mail,
              'order_info' => $order_info,
              'order_status_id' => (int)$order_status_id,
              'order_status_name' => $order_status_query->num_rows ? $order_status_query->row['name'] : '',
              'data' => array(
                'order_status' => $order_status_query->num_rows ? $order_status_query->row['name'] : '',
                'message' => nl2br($comment),
               ),
              'conditions' => array(
                'message' => $comment ? 1 : 0,
               ),
            );
            
            $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
  </file>
  
	<file path="catalog/model/checkout/order.php" v="2">
		<operation error="skip">
			<search index="0"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="0"><![CDATA[
				/*
				$mail->send();
        */
        
				$this->load->model('tool/pro_email');

        if (!empty($data['payment_instruction']) && strpos($order_info['payment_code'],'xpayment.') !== false) {
          $comment = $data['payment_instruction'];
        }
        
        $email_params = array(
          'type' => 'order.confirm',
          'mail' => $mail,
          'order_info' => $order_info,
          'order_status_id' => $order_status_id,
          'order_comment' => nl2br($comment),
        );
        
        $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
    <operation error="skip">
			<search index="1"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="1"><![CDATA[
				/*
				$mail->send();
        */
        
				$this->load->model('tool/pro_email');

        $email_params = array(
          'type' => 'admin.order.confirm',
          'mail' => &$mail,
          'reply_to' => $order_info['email'],
          'order_info' => $order_info,
          'order_status_id' => $order_status_id,
          'order_comment' => nl2br($comment),
        );
        
        $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
		<operation error="skip">
			<search index="3"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="3"><![CDATA[
						/*
				$mail->send();
        */
        
            $this->load->model('tool/pro_email');

            $email_params = array(
              'type' => 'order.update',
              'mail' => $mail,
              'order_info' => $order_info,
              'order_status_id' => (int)$order_status_id,
              'order_status_name' => $order_status_query->num_rows ? $order_status_query->row['name'] : '',
              'data' => array(
                'order_status' => $order_status_query->num_rows ? $order_status_query->row['name'] : '',
                'message' => nl2br($comment),
               ),
              'conditions' => array(
                'message' => $comment ? 1 : 0,
               ),
            );
            
            $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
	</file>
  
  <file path="admin/model/gkd_import/order.php" error="skip">
		<operation error="skip">
			<search index="0"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="0"><![CDATA[
				/*
				$mail->send();
        */
        
				$this->load->model('tool/pro_email');

        if (!empty($data['payment_instruction']) && strpos($order_info['payment_code'],'xpayment.') !== false) {
          $comment = $data['payment_instruction'];
        }
        
        $email_params = array(
          'type' => 'order.confirm',
          'mail' => $mail,
          'order_info' => $order_info,
          'order_status_id' => $order_status_id,
          'order_comment' => nl2br($comment),
        );
        
        $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
    <operation error="skip">
			<search index="1"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="1"><![CDATA[
				/*
				$mail->send();
        */
        
				$this->load->model('tool/pro_email');

        $email_params = array(
          'type' => 'admin.order.confirm',
          'mail' => &$mail,
          'reply_to' => $order_info['email'],
          'order_info' => $order_info,
          'order_status_id' => $order_status_id,
          'order_comment' => nl2br($comment),
        );
        
        $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
		<operation error="skip">
			<search index="3"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="3"><![CDATA[
						/*
				$mail->send();
        */
        
            $this->load->model('tool/pro_email');

            $email_params = array(
              'type' => 'order.update',
              'mail' => $mail,
              'order_info' => $order_info,
              'order_status_id' => (int)$order_status_id,
              'order_status_name' => $order_status_query->num_rows ? $order_status_query->row['name'] : '',
              'data' => array(
                'order_status' => $order_status_query->num_rows ? $order_status_query->row['name'] : '',
                'message' => nl2br($comment),
               ),
              'conditions' => array(
                'message' => $comment ? 1 : 0,
               ),
            );
            
            $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
	</file>
  
  <file path="admin/model/tool/quick_status_updater.php" error="skip">
		<operation error="skip">
			<search index="0"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="0"><![CDATA[
				/*
				$mail->send();
        */
        
				$this->load->model('tool/pro_email');

        if (!empty($data['payment_instruction']) && strpos($order_info['payment_code'],'xpayment.') !== false) {
          $comment = $data['payment_instruction'];
        }
        
        $email_params = array(
          'type' => 'order.confirm',
          'mail' => $mail,
          'order_info' => $order_info,
          'order_status_id' => $order_status_id,
          'order_comment' => nl2br($comment),
        );
        
        $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
    <operation error="skip">
			<search index="1"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="1"><![CDATA[
				/*
				$mail->send();
        */
        
				$this->load->model('tool/pro_email');

        $email_params = array(
          'type' => 'admin.order.confirm',
          'mail' => &$mail,
          'reply_to' => $order_info['email'],
          'order_info' => $order_info,
          'order_status_id' => $order_status_id,
          'order_comment' => nl2br($comment),
        );
        
        $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
		<operation error="skip">
			<search index="3"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="3"><![CDATA[
						/*
				$mail->send();
        */
        
            $this->load->model('tool/pro_email');

            $email_params = array(
              'type' => 'order.update',
              'mail' => $mail,
              'order_info' => $order_info,
              'order_status_id' => (int)$order_status_id,
              'order_status_name' => $order_status_query->num_rows ? $order_status_query->row['name'] : '',
              'data' => array(
                'order_status' => $order_status_query->num_rows ? $order_status_query->row['name'] : '',
                'message' => nl2br($comment),
               ),
              'conditions' => array(
                'message' => $comment ? 1 : 0,
               ),
            );
            
            $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
	</file>
	
	<!--mail on order update (1.5 only, in c/m/c/o for v2)-->
	<file path="admin/model/sale/order.php">
		<operation error="skip">
			<search><![CDATA[$mail->send();]]></search>
			<add position="replace"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'order.update',
        'mail' => $mail,
        'order_info' => $order_info,
        'order_status_id' => $data['order_status_id'],
        'data' => array(
          'order_status' => $order_status_query->num_rows ? $order_status_query->row['name'] : '',
          'message' => nl2br($data['comment']),
         ),
        'conditions' => array(
          'message' => $data['comment'] ? 1 : 0,
         ),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
	</file>
  
  <file path="catalog/model/openbay/ebay_order.php" error="skip">
		<operation>
			<search index="0"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="0"><![CDATA[
				/*
				$mail->send();
        */
        
				$this->load->model('tool/pro_email');

        if (!empty($data['payment_instruction']) && strpos($order_info['payment_code'],'xpayment.') !== false) {
          $comment = $data['payment_instruction'];
        }
        
        $email_params = array(
          'type' => 'order.confirm',
          'mail' => $mail,
          'order_info' => $order_info,
        );
        
        $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
  </file>
	
  <file path="admin/model/sale/return.php" error="skip" v="2">
		<operation error="skip">
			<search><![CDATA[$mail->send();]]></search>
			<add position="replace"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');
      $this->load->model('sale/order');
      
      if (isset($return_info['order_id'])) {
        $order_info = $this->model_sale_order->getOrder($return_info['order_id']);
      } else if (isset($return_query->row['order_id'])) {
        $order_info = $this->model_sale_order->getOrder($return_query->row['order_id']);
      } else {
        $order_info = false;
      }
      
      /*
      if (isset($return_info['customer_id'])) {
        $store_query = $this->db->query("SELECT store_id FROM `" . DB_PREFIX . "customer` WHERE customer_id = '" . (int)$return_info['customer_id'] . "'")->row;
      } else if (isset($return_query->row['customer_id'])) {
        $store_query = $this->db->query("SELECT store_id FROM `" . DB_PREFIX . "customer` WHERE customer_id = '" . (int)$return_query->row['customer_id'] . "'")->row;
      }
      */
      
      if (isset($return_info['return_status'])) {
        $return_status = $return_info['return_status'];
      } else if (isset($return_query->row['status'])) {
        $return_status = $return_query->row['status'];
      } else if (isset($return_status_id)) {
        $return_status = $return_status_id;
      }
      
      $email_params = array(
        'type' => 'order.return',
        'mail' => $mail,
        'store_id' => isset($order_info['store_id']) ? $order_info['store_id'] : 0,
        'order_info' => $order_info,
        'data' => array(
          'return_id' => $return_id,
          'order_status' => $return_status,
          'return_status' => $return_status,
          'message' => $data['comment'],
         ),
        'conditions' => array(
          'message' => !empty($data['comment']),
         ),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
	</file>
  
  <file path="admin/controller/mail/return.php" error="skip" v="3">
		<operation error="skip">
			<search><![CDATA[$mail->send();]]></search>
			<add position="replace"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $order_id = $return_info['order_id'];
 
      $this->load->model('sale/order');

      if (isset($return_info['order_id'])) {
        $order_info = $this->model_sale_order->getOrder($return_info['order_id']);
      } else if (isset($return_query->row['order_id'])) {
        $order_info = $this->model_sale_order->getOrder($return_query->row['order_id']);
      } else {
        $order_info = false;
      }
      
      /*
      if (isset($return_info['customer_id'])) {
        $store_query = $this->db->query("SELECT store_id FROM `" . DB_PREFIX . "customer` WHERE customer_id = '" . (int)$return_info['customer_id'] . "'")->row;
      } else if (isset($return_query->row['customer_id'])) {
        $store_query = $this->db->query("SELECT store_id FROM `" . DB_PREFIX . "customer` WHERE customer_id = '" . (int)$return_query->row['customer_id'] . "'")->row;
      }
      */
      
      if (isset($return_info['return_status'])) {
        $return_status = $return_info['return_status'];
      } else if (isset($return_query->row['status'])) {
        $return_status = $return_query->row['status'];
      } else if (isset($return_status_id)) {
        $return_status = $return_status_id;
      }
      
      $email_params = array(
        'type' => 'order.return',
        'mail' => $mail,
        'store_id' => isset($order_info['store_id']) ? $order_info['store_id'] : 0,
        'order_info' => $order_info,
        'data' => array(
          'return_id' => $return_id,
          'order_status' => $return_status,
          'return_status' => $return_status,
          'message' => $data['comment'],
         ),
        'conditions' => array(
          'message' => !empty($data['comment']),
         ),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
	</file>
  
  <file path="catalog/controller/mail/register.php" error="skip" v="3">
		<operation error="skip">
			<search index="0"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="0"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');
      $this->load->model('account/customer');
      $customer = $this->model_account_customer->getCustomerByEmail($args[0]['email']);

      $email_params = array(
        'type' => 'customer.register',
        'mail' => $mail,
        'data' => $data,
        'customer_id' => isset($customer['customer_id']) ? $customer['customer_id'] : false,
        'conditions' => array('approval' => $customer_group_info['approval']),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
    
    <operation error="skip">
			<search index="1"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="1"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');
      $this->load->model('account/customer');
      $customer = $this->model_account_customer->getCustomerByEmail($args[0]['email']);

      $email_params = array(
        'type' => 'admin.customer.register',
        'mail' => $mail,
        'reply_to' => $data['email'],
        'customer_id' => isset($customer['customer_id']) ? $customer['customer_id'] : false,
        'data' => array(),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
	</file>
  
  <file path="catalog/model/account/customer.php">
		<operation error="skip">
			<search index="0"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="0"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'customer.register',
        'mail' => $mail,
        'data' => $data,
        'customer_id' => isset($customer_id) ? $customer_id : false,
        'conditions' => array('approval' => $customer_group_info['approval']),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
    
    <operation error="skip">
			<search index="1"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="1"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'admin.customer.register',
        'mail' => $mail,
        'reply_to' => $data['email'],
        'customer_id' => isset($customer_id) ? $customer_id : false,
        'data' => array(),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
	</file>
  
  <file path="admin/model/sale/customer.php" error="skip" v="1.5">
		<operation>
			<search index="0"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="0"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'customer.approve',
        'mail' => $mail,
        'store_id' => isset($store_info['store_id']) ? $store_info['store_id'] : 0,
        'customer_id' => isset($customer_info['customer_id']) ? $customer_info['customer_id'] : false,
        'data' => array(),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
    
		<operation>
			<search index="1"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="1"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'customer.credit',
        'mail' => $mail,
        'store_id' => isset($store_info['store_id']) ? $store_info['store_id'] : 0,
        'data' => array(
          'firstname' => $customer_info['firstname'],
          'amount' => $this->currency->format($amount, $this->config->get('config_currency')),
          'total' => $this->currency->format($this->getTransactionTotal($customer_id)),
         ),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
    
    <operation>
			<search index="2"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="2"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'customer.reward',
        'mail' => $mail,
        'store_id' => isset($store_info['store_id']) ? $store_info['store_id'] : 0,
        'customer_id' => isset($customer_info['customer_id']) ? $customer_info['customer_id'] : false,
        'data' => array(
          'amount' => $points,
          'total' => $this->getRewardTotal($customer_id),
         ),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
	</file>
  
  <file path="admin/controller/mail/reward.php" error="skip" v="3">
  
    <operation error="skip">
			<search><![CDATA[$mail->send();]]></search>
			<add position="replace"><![CDATA[
			/*
				$mail->send();
        */
      
      if (!empty($order_id)) {
        $this->load->model('sale/order');
        $order_info = $this->model_sale_order->getOrder($order_id);
        $store_info = $this->model_setting_store->getStore($order_info['store_id']);
      }
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'customer.reward',
        'mail' => $mail,
        'order_id' => $order_id ? $order_id : '',
        'store_id' => isset($store_info['store_id']) ? $store_info['store_id'] : 0,
        'customer_id' => isset($customer_info['customer_id']) ? $customer_info['customer_id'] : false,
        'data' => array(
          'amount' => $points,
          'total' => $this->model_customer_customer->getRewardTotal($customer_id),
         ),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
    
  </file>
  
  <file path="catalog/controller/mail/transaction.php" error="skip" v="3">
  
    <operation error="skip">
			<search index="0"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="0"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'customer.transaction',
        'mail' => $mail,
        'store_id' => isset($store_info['store_id']) ? $store_info['store_id'] : 0,
        'customer_id' => isset($customer_info['customer_id']) ? $customer_info['customer_id'] : false,
        'data' => array(
          'amount' => $data['text_received'],
          'total' => $data['text_total'],
         ),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
    
  </file>
  
  <file path="admin/controller/mail/transaction.php" error="skip" v="3">
  
    <operation error="skip">
			<search index="0"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="0"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'customer.credit',
        'mail' => $mail,
        'store_id' => isset($store_info['store_id']) ? $store_info['store_id'] : 0,
        'customer_id' => isset($customer_info['customer_id']) ? $customer_info['customer_id'] : false,
        'data' => array(
          'amount' => $this->currency->format($amount, $this->config->get('config_currency')),
          'total' => $this->currency->format($this->model_customer_customer->getTransactionTotal($customer_id), $this->config->get('config_currency')),
         ),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
    
  </file>
  
  <file path="admin/controller/mail/customer.php" error="skip" v="3">
		<operation error="skip">
			<search index="0"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="0"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'customer.approve',
        'lang' => $customer_info['language_id'],
        'mail' => $mail,
        'store_id' => isset($store_info['store_id']) ? $store_info['store_id'] : 0,
        'customer_id' => isset($customer_info['customer_id']) ? $customer_info['customer_id'] : false,
        'data' => array(),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
    
    <operation error="skip">
			<search index="1"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="1"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'customer.deny',
        'mail' => $mail,
        'store_id' => isset($store_info['store_id']) ? $store_info['store_id'] : 0,
        'customer_id' => isset($customer_info['customer_id']) ? $customer_info['customer_id'] : false,
        'data' => array(),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
	</file>
  
  <file path="admin/model/customer/customer.php" error="skip" v="2.x">
		<operation error="skip">
			<search index="0"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="0"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'customer.approve',
        'lang' => $customer_info['language_id'],
        'mail' => $mail,
        'store_id' => isset($store_info['store_id']) ? $store_info['store_id'] : 0,
        'customer_id' => isset($customer_info['customer_id']) ? $customer_info['customer_id'] : false,
        'data' => array(),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
    
    <operation error="skip">
			<search index="1"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="1"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'customer.credit',
        'mail' => $mail,
        'store_id' => isset($store_info['store_id']) ? $store_info['store_id'] : 0,
        'customer_id' => isset($customer_info['customer_id']) ? $customer_info['customer_id'] : false,
        'data' => array(
          'amount' => $this->currency->format($amount, $this->config->get('config_currency')),
          'total' => $this->currency->format($this->getTransactionTotal($customer_id)),
         ),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
    
    <operation error="skip">
			<search index="2"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="2"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'customer.reward',
        'mail' => $mail,
        'store_id' => isset($store_info['store_id']) ? $store_info['store_id'] : 0,
        'customer_id' => isset($customer_info['customer_id']) ? $customer_info['customer_id'] : false,
        'data' => array(
          'amount' => $points,
          'total' => $this->getRewardTotal($customer_id),
         ),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
	</file>
  
  <file path="catalog/controller/account/forgotten.php">
		<operation error="skip">
			<search><![CDATA[$mail->send();]]></search>
			<add position="replace"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'customer.forgotten',
        'mail' => $mail,
        'data' => array(
          'password' => !empty($password) ? $password : '',
          'reset_link' => !empty($code) ? $this->url->link('account/reset', 'code=' . $code, true) : ''),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
	</file>
  
  <file path="catalog/controller/mail/affiliate.php" v="3" error="skip">
    <operation>
     <search index="0"><![CDATA[$mail->send();]]></search>
     <add position="replace" index="0"><![CDATA[
     /*
				$mail->send();
        */
    
        $this->load->model('tool/pro_email');

        $email_params = array(
          'type' => 'affiliate.register',
          'mail' => $mail,
          'data' => $data,
          'conditions' => array('approval' => $this->config->get('config_affiliate_approval')),
        );
        
        $this->model_tool_pro_email->generate($email_params);
     ]]></add>
    </operation>
      
      <operation error="skip">
     <search index="1"><![CDATA[$mail->send();]]></search>
     <add position="replace" index="1"><![CDATA[
     /*
				$mail->send();
        */
    
        $this->load->model('tool/pro_email');

        $email_params = array(
          'type' => 'admin.affiliate.register',
          'mail' => $mail,
          'reply_to' => $data['email'],
          'affiliate_id' => isset($affiliate_id) ? $affiliate_id : false,
          'data' => array(
              'firstname' => $data['firstname'],
              'lastname' => $data['lastname'],
              'company' => $data['company'],
              'website' => $data['website'],
              'email' => $data['email'],
              'telephone' => $data['telephone'],
          ),
        );
        
        $this->model_tool_pro_email->generate($email_params);
     ]]></add>
    </operation>
   </file>
  
  <file path="catalog/model/affiliate/affiliate.php" v="2" error="skip">
		<operation>
			<search index="0"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="0"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'affiliate.register',
        'mail' => $mail,
        'data' => $data,
        'conditions' => array('approval' => $this->config->get('config_affiliate_approval')),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
    
    <operation error="skip">
			<search index="1"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="1"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'admin.affiliate.register',
        'mail' => $mail,
        'reply_to' => $data['email'],
        'affiliate_id' => isset($affiliate_id) ? $affiliate_id : false,
        'data' => array(),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
	</file>
  
  <file path="admin/model/sale/affiliate.php" error="skip" v="1.5">
		<operation>
			<search index="0"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="0"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'affiliate.approve',
        'mail' => $mail,
        'data' => array(
          'firstname' => $affiliate_info['firstname'],
         ),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
    
		<operation>
			<search index="1"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="1"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'affiliate.transaction',
        'mail' => $mail,
        'data' => array(
          'firstname' => $affiliate_info['firstname'],
          'amount' => $this->currency->format($amount, $this->config->get('config_currency')),
          'total' => $this->currency->format($this->getTransactionTotal($affiliate_id), $this->config->get('config_currency')),
         ),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
	</file>
  
  <file path="admin/controller/mail/affiliate.php" error="skip" v="3">
		<operation>
			<search index="0"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="0"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'affiliate.approve',
        'mail' => $mail,
        'data' => array(
          'firstname' => $customer_info['firstname'],
         ),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
    
    <operation>
			<search index="1"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="1"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'affiliate.deny',
        'mail' => $mail,
        'data' => array(
          'firstname' => $customer_info['firstname'],
         ),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
	</file>
  
  <file path="admin/model/marketing/affiliate.php" error="skip" v="2.x">
		<operation>
			<search index="0"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="0"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'affiliate.approve',
        'mail' => $mail,
        'data' => array(
          'firstname' => $affiliate_info['firstname'],
         ),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
    
    <operation>
			<search index="1"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="1"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'affiliate.transaction',
        'mail' => $mail,
        'data' => array(
          'firstname' => $affiliate_info['firstname'],
          'amount' => $this->currency->format($amount, $this->config->get('config_currency')),
          'total' => $this->currency->format($this->getTransactionTotal($affiliate_id), $this->config->get('config_currency')),
         ),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
	</file>
  
  <!--file path="admin/controller/mail/forgotten.php" error="skip" v="3">
		<operation>
			<search><![CDATA[$mail->send();]]></search>
			<add position="replace"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'admin.forgotten',
        'mail' => $mail,
        'data' => array(
          'password' => !empty($password) ? $password : '',
          'reset_link' => !empty($code) ? $this->url->link('account/reset', 'code=' . $code, true) : ''),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
	</file-->
  
  <file path="catalog/controller/mail/forgotten.php" error="skip" v="3">
		<operation>
			<search><![CDATA[$mail->send();]]></search>
			<add position="replace"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      if (!isset($code)) {
        $code = $args[1];
      }
      
      $email_params = array(
        'type' => 'customer.forgotten',
        'mail' => $mail,
        'data' => array(
          'password' => !empty($password) ? $password : '',
          'reset_link' => !empty($code) ? $this->url->link('account/reset', 'code=' . $code, true) : ''),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
	</file>
  
  <file path="catalog/controller/affiliate/forgotten.php" error="skip" v="2">
		<operation error="skip">
			<search><![CDATA[$mail->send();]]></search>
			<add position="replace"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'affiliate.forgotten',
        'mail' => $mail,
        'data' => array(
          'password' => !empty($password) ? $password : '',
          'reset_link' => !empty($code) ? $this->url->link('account/reset', 'code=' . $code, true) : ''),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
	</file>
  
  <file path="catalog/model/checkout/voucher.php" error="skip">
		<operation>
			<search><![CDATA[$mail->send();]]></search>
			<add position="replace"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      if (isset($voucher)) {
        $voucher_info = $voucher;
      }
      
      if (isset($template->data)) {
        $data = $template->data;
      }
      
      $email_params = array(
        'type' => 'customer.voucher',
        'mail' => $mail,
        'data' => array(
          'image' => '<img src="'.$data['image'].'" alt="" class="center"/>',
          'message' => $data['message'],
          'amount' => $this->currency->format($voucher_info['amount'], $order_info['currency_code'], $order_info['currency_value']),
          'from' => $voucher_info['from_name'],
          'code' => $voucher_info['code'],
         ),
        'conditions' => array(
          'image' => $data['image'],
          'message' => nl2br($voucher_info['message']),
         ),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
	</file>
  
  <file path="catalog/controller/total/voucher.php" error="skip">
    <operation error="skip">
     <search><![CDATA[$mail->send();]]></search>
     <add position="replace"><![CDATA[
     /*
          $mail->send();
          */
    
        $this->load->model('tool/pro_email');

        if (isset($voucher)) {
          $voucher_info = $voucher;
        }
        
        $email_params = array(
          'type' => 'customer.voucher',
          'mail' => $mail,
          'data' => array(
            'image' => '<img src="'.$data['image'].'" alt="" class="center"/>',
            'message' => $data['message'],
            'amount' => $this->currency->format($voucher_info['amount'], $order_info['currency_code'], $order_info['currency_value']),
            'from' => $voucher_info['from_name'],
            'code' => $voucher_info['code'],
           ),
          'conditions' => array(
            'image' => $data['image'],
            'message' => nl2br($voucher_info['message']),
           ),
        );
        
        $this->model_tool_pro_email->generate($email_params);
     ]]></add>
    </operation>
   </file>
 
  <file path="catalog/controller/extension/total/voucher.php" error="skip">
  <operation error="skip">
   <search><![CDATA[$mail->send();]]></search>
   <add position="replace"><![CDATA[
   /*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      if (isset($voucher)) {
        $voucher_info = $voucher;
      }
      
      $email_params = array(
        'type' => 'customer.voucher',
        'mail' => $mail,
        'data' => array(
          'image' => '<img src="'.$data['image'].'" alt="" class="center"/>',
          'message' => $data['message'],
          'amount' => $this->currency->format($voucher_info['amount'], $order_info['currency_code'], $order_info['currency_value']),
          'from' => $voucher_info['from_name'],
          'code' => $voucher_info['code'],
         ),
        'conditions' => array(
          'image' => $data['image'],
          'message' => nl2br($voucher_info['message']),
         ),
      );
      
      $this->model_tool_pro_email->generate($email_params);
   ]]></add>
  </operation>
 </file>
  
  <file path="admin/controller/sale/voucher.php" error="skip" v="3">
    <operation error="skip">
     <search><![CDATA[$mail->send();]]></search>
     <add position="replace"><![CDATA[
        /*
				$mail->send();
        */
    
        $this->load->model('tool/pro_email');

        if (isset($voucher)) {
          $voucher_info = $voucher;
        }
        
        if (isset($template->data)) {
          $data = $template->data;
        }
        
        $email_params = array(
          'type' => 'customer.voucher',
          'mail' => $mail,
          'data' => array(
            'image' => '<img src="'.$data['image'].'" alt="" class="center"/>',
            'message' => $data['message'],
            'amount' => $this->currency->format($voucher_info['amount'], (!empty($order_info['currency_code']) ? $order_info['currency_code'] : $this->config->get('config_currency')), (!empty($order_info['currency_value']) ? $order_info['currency_value'] : $this->currency->getValue($this->config->get('config_currency')))),
            'from' => $voucher_info['from_name'],
            'code' => $voucher_info['code'],
           ),
          'conditions' => array(
            'image' => $data['image'],
            'message' => nl2br($voucher_info['message']),
           ),
        );
        
        $this->model_tool_pro_email->generate($email_params);
     ]]></add>
    </operation>
  </file>
  
  <file path="admin/controller/extension/total/voucher.php" error="skip">
		<operation error="skip">
			<search><![CDATA[$mail->send();]]></search>
			<add position="replace"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      if (isset($voucher)) {
        $voucher_info = $voucher;
      }
      
      $email_params = array(
        'type' => 'customer.voucher',
        'mail' => $mail,
        'data' => array(
          'image' => '<img src="'.$data['image'].'" alt="" class="center"/>',
          'message' => $data['message'],
          'amount' => $this->currency->format($voucher_info['amount'], $order_info['currency_code'], $order_info['currency_value']),
          'from' => $voucher_info['from_name'],
          'code' => $voucher_info['code'],
         ),
        'conditions' => array(
          'image' => $data['image'],
          'message' => nl2br($voucher_info['message']),
         ),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
	</file>
  
  <file path="admin/model/sale/voucher.php" error="skip">
		<operation error="skip">
			<search><![CDATA[$mail->send();]]></search>
			<add position="replace"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      if (isset($voucher)) {
        $voucher_info = $voucher;
      }
      
      if (isset($template->data)) {
        $data = $template->data;
      }
      
      $email_params = array(
        'type' => 'customer.voucher',
        'mail' => $mail,
        'data' => array(
          'image' => '<img src="'.$data['image'].'" alt="" class="center"/>',
          'message' => $data['message'],
          'amount' => $this->currency->format($voucher_info['amount'], $order_info['currency_code'], $order_info['currency_value']),
          'from' => $voucher_info['from_name'],
          'code' => $voucher_info['code'],
         ),
        'conditions' => array(
          'image' => $data['image'],
          'message' => nl2br($voucher_info['message']),
         ),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
	</file>
  
  <file path="admin/controller/sale/contact.php" error="skip" v="1.5">
		<operation error="skip">
			<search><![CDATA[$mail->send();]]></search>
			<add position="replace"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'sale.contact',
        'mail' => $mail,
        'data' => array(
          'message' => $message,
         ),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
	</file>
  
  <file path="admin/controller/marketing/contact.php" error="skip" v="2.x">
		<operation error="skip">
			<search><![CDATA[$emails = array();]]></search>
			<add position="after"><![CDATA[
			$customer_infos = array();
			]]></add>
		</operation>
    
    <operation error="skip">
			<search><![CDATA[$emails[] = $customer_info['email'];]]></search>
			<add position="after"><![CDATA[
			$customer_infos[$customer_info['email']] = $customer_info;
			]]></add>
		</operation>
    
    <operation error="skip">
			<search><![CDATA[$emails[] = $result['email'];]]></search>
			<add position="after"><![CDATA[
			$customer_infos[$result['email']] = $result;
			]]></add>
		</operation>
    
		<operation error="skip">
			<search><![CDATA[$mail->send();]]></search>
			<add position="replace"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $mailData = array();
      
      if (isset($customer_infos[$email])) {
        $mailData = $customer_infos[$email];
      }
      
      $mailData['message'] = $message;
      
      $email_params = array(
        'type' => 'sale.contact',
        'mail' => $mail,
        'data' => $mailData,
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
	</file>
  
  <file path="catalog/controller/information/contact.php">
		<operation error="skip">
			<search index="0"><![CDATA[$mail->send();]]></search>
			<add position="replace" index="0"><![CDATA[
			/*
				$mail->send();
        */
  
      $this->load->model('tool/pro_email');

      $email_params = array(
        'type' => 'admin.information.contact',
        'mail' => $mail,
        'reply_to' => $this->request->post['email'],
        'data' => array(
            'enquiry_name' => html_entity_decode($this->request->post['name'], ENT_QUOTES, 'UTF-8'),
            'enquiry_mail' => html_entity_decode($this->request->post['email'], ENT_QUOTES, 'UTF-8'),
            'enquiry_message' => nl2br(html_entity_decode($this->request->post['enquiry'], ENT_QUOTES, 'UTF-8')),
          ),
      );
      
      $this->model_tool_pro_email->generate($email_params);
			]]></add>
		</operation>
	</file>
  
  <file path="catalog/controller/journal3/mail.php" error="skip">
  
    <operation error="skip">
     <search><![CDATA[$mail->send();]]></search>
     <add position="replace"><![CDATA[
        /*
				$mail->send();
        */
    
        $this->load->model('tool/pro_email');
        
        if (!empty($data['reply_to'])) {
          $email_params = array(
            'type' => 'admin.information.contact',
            'mail' => $mail,
            //'content' => html_entity_decode($data['message'], ENT_QUOTES, 'UTF-8'), // force content
            'data' => array(
              'message' => html_entity_decode($data['message'], ENT_QUOTES, 'UTF-8'),
              'enquiry_name' => html_entity_decode($data['subject'], ENT_QUOTES, 'UTF-8'),
              'enquiry_mail' => '', // not available for journal
              'enquiry_message' => html_entity_decode($data['message'], ENT_QUOTES, 'UTF-8'),
            ),
          );
        } else {
          $email_params = array(
            //'type' => 'admin.information.contact',
            'mail' => $mail,
            'content' => html_entity_decode($data['message'], ENT_QUOTES, 'UTF-8'), // force content
          );
        }
        
        $this->model_tool_pro_email->generate($email_params);
     ]]></add>
    </operation>
    
  </file>
  
	<file path="system/library/mail.php" error="skip">
		<operation error="skip">
			<search><![CDATA[function setTo($to) {]]></search>
			<add position="before"><![CDATA[
			public function proEmailGetData($param) {
        if (isset($this->{$param})) {
          return $this->{$param};
        }
      }
			]]></add>
		</operation>
	</file>
  
	<!-- Admin -->
  
	<file path="admin/view/template/common/header.tpl" error="skip" v="1.5">
		<operation error="skip">
			<search><![CDATA[<li><a href="<?php echo $feed; ?>">]]></search>
			<add position="after"><![CDATA[
			<?php $this->load->model('setting/extension'); if(in_array('pro_email', $this->model_setting_extension->getInstalled('module'))){ ?>
			<li><a href="<?php echo $this->url->link('module/pro_email', 'token=' . $this->session->data['token'], 'SSL'); ?>"><img style="vertical-align:text-top" src="<?php echo defined('JPATH_MIJOSHOP_OC') ? 'admin/':''; ?>view/pro_email/img/icon.png"/> Pro Email Template</a></li>
			<?php }else{ ?>
			<li><a href="<?php echo $this->url->link('extension/module/install', 'extension=pro_email&token=' . $this->session->data['token'], 'SSL'); ?>"><img style="vertical-align:text-top" src="<?php echo defined('JPATH_MIJOSHOP_OC') ? 'admin/':''; ?>view/pro_email/img/icon.png"/> Install Pro Email Template</a></li>
			<?php } ?>
			]]></add>
		</operation>
	</file>
	
	<file path="admin/controller/common/menu.php" error="skip" v="2.0 - 2.2">
		<operation error="skip">
			<search><![CDATA[$this->load->language('common/menu');]]></search>
			<add position="after"><![CDATA[
			$this->load->model('extension/extension');
			if (in_array('pro_email', $this->model_extension_extension->getInstalled('module'))) {
				$data['text_proemailtpl'] = 'Pro Email Template';
				$data['link_proemailtpl'] = $this->url->link('module/pro_email', 'token=' . $this->session->data['token'], 'SSL');
			} else {
				$data['text_proemailtpl'] = 'Install Pro Email Template';
				$data['link_proemailtpl'] = $this->url->link('extension/module/install', 'extension=pro_email&token=' . $this->session->data['token'], 'SSL');
			}
			]]></add>
		</operation>
	</file>
  
  <file path="admin/controller/common/column_left.php" error="skip" v="3">
  
    <operation error="skip">
      <search><![CDATA[if ($this->user->hasPermission('access', 'marketplace/event')) {]]></search>
      <add position="before"><![CDATA[
      $this->load->model('setting/extension');

      if (!in_array('pro_email', $this->model_setting_extension->getInstalled('module'))) {
        $marketplace[] = array(
					'name'	   => '<img style="vertical-align:text-top" src="view/pro_email/img/icon.png"/> Install Pro Email Template',
					'href'     => $this->url->link('extension/extension/module/install', 'extension=pro_email&redir=1&user_token=' . $this->session->data['user_token'], true),
					'children' => array()		
				);
      } else if ($this->user->hasPermission('access', 'module/pro_email')) {
				$marketplace[] = array(
					'name'	   => '<img style="vertical-align:text-top" src="view/pro_email/img/icon.png"/> Pro Email Template',
					'href'     => $this->url->link('module/pro_email', 'user_token=' . $this->session->data['user_token'], true),
					'children' => array()		
				);
			}
      ]]></add>
    </operation>
    
  </file><file path="admin/controller/common/column_left.php" error="skip" v="2.3">
  
    <operation error="skip">
      <search><![CDATA[if ($this->user->hasPermission('access', 'extension/event')) {]]></search>
      <add position="before"><![CDATA[
      $this->load->model('extension/extension');
      
      if (!in_array('pro_email', $this->model_extension_extension->getInstalled('module'))) {
        $extension[] = array(
					'name'	   => '<img style="vertical-align:text-top" src="view/pro_email/img/icon.png"/> Install Pro Email Template',
					'href'     => $this->url->link('extension/extension/module/install', 'extension=pro_email&redir=1&token=' . $this->session->data['token'], true),
					'children' => array()		
				);
      } else if ($this->user->hasPermission('access', 'module/pro_email')) {
				$extension[] = array(
					'name'	   => '<img style="vertical-align:text-top" src="view/pro_email/img/icon.png"/> Pro Email Template',
					'href'     => $this->url->link('module/pro_email', 'token=' . $this->session->data['token'], true),
					'children' => array()		
				);
			}
      ]]></add>
    </operation>
    
  </file>
  
	<file path="admin/view/template/common/menu.tpl" error="skip">
		<operation error="skip">
			<search><![CDATA[<li><a href="<?php echo $feed; ?>"><?php echo $text_feed; ?></a></li>]]></search>
			<add position="after"><![CDATA[
			<li><a href="<?php echo $link_proemailtpl; ?>"><img style="vertical-align:text-top" src="<?php echo defined('JPATH_MIJOSHOP_OC') ? 'admin/':''; ?>view/pro_email/img/icon.png"/> <?php echo $text_proemailtpl; ?></a></li>
			]]></add>
		</operation>
	</file>
	
  <file path="admin/controller/extension/extension/module.php" error="skip">
  
    <operation error="skip">
			<search><![CDATA[$files = glob(DIR_APPLICATION . 'controller/extension/module/*.php');]]></search>
			<add position="after"><![CDATA[
    if (version_compare(VERSION, '3', '>=')) {
      $files[] = 'pro_email';
    }
			]]></add>
		</operation>
    
  </file><file path="admin/controller/extension/extension/module.php" i="fix 2.3 link" error="skip">
  
    <operation error="skip">
			<search index="0"><![CDATA[$data['extensions'][] = array(]]></search>
			<add position="before" index="0"><![CDATA[
        if ($extension == 'pro_email') {
          ${'data'}['extensions'][] = array(
            //'name'      => (version_compare(VERSION, '3', '>=') ? ($this->language->get('extension')->get('heading_title') != 'heading_title' ? $this->language->get('extension')->get('heading_title') : $language->get('heading_title')) : $this->language->get('heading_title')),
            'name'      => (version_compare(VERSION, '3', '>=') ? $this->language->get('extension')->get('heading_title') : $this->language->get('heading_title')),
            'status'    => in_array($extension, $extensions) ? $this->language->get('text_enabled') : $this->language->get('text_disabled'),
            'module'    => $module_data,
            'install'   => $this->url->link('extension/extension/module/install', (isset($this->session->data['user_token']) ? 'user_token='.$this->session->data['user_token'] : 'token='.$this->session->data['token']) . '&extension=' . $extension, true),
            'uninstall' => $this->url->link('extension/extension/module/uninstall', (isset($this->session->data['user_token']) ? 'user_token='.$this->session->data['user_token'] : 'token='.$this->session->data['token']) . '&extension=' . $extension, true),
            'installed' => in_array($extension, $extensions),
            'edit'      => $this->url->link('module/' . $extension, (isset($this->session->data['user_token']) ? 'user_token='.$this->session->data['user_token'] : 'token='.$this->session->data['token']), true)
          );
          continue;
        }
			]]></add>
		</operation>
		
	</file>
  
</modification>